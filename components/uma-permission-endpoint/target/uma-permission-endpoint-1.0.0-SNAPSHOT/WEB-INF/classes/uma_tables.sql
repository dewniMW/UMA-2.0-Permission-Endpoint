CREATE TABLE IDN_PERMISSION_TICKET (
  ID  INTEGER     AUTO_INCREMENT PRIMARY KEY NOT NULL,
  PT              VARCHAR(255)                           NOT NULL,
  TIME_CREATED    TIMESTAMP   DEFAULT '0',
  VALIDITY_PERIOD BIGINT,
  TICKET_STATE    VARCHAR(25) DEFAULT 'ACTIVE'
);

CREATE TABLE IDN_RESOURCE (
  ID       INTEGER AUTO_INCREMENT PRIMARY KEY NOT NULL,
  IDENTITY VARCHAR(255),
  PT_ID    INTEGER,
  CONSTRAINT FK_PT FOREIGN KEY (PT_ID) REFERENCES IDN_PERMISSION_TICKET (ID) ON DELETE CASCADE
);

CREATE TABLE IDN_RESOURCE_SCOPE (
  ID          INTEGER AUTO_INCREMENT PRIMARY KEY NOT NULL,
  RESOURCE_ID INTEGER,
  SCOPE_ID    INTEGER,
  CONSTRAINT FK_RESOURCE_ID FOREIGN KEY (RESOURCE_ID) REFERENCES IDN_RESOURCE (ID),
  CONSTRAINT FK_SCOPE_ID FOREIGN KEY (SCOPE_ID) REFERENCES IDN_OAUTH2_SCOPE (SCOPE_ID)
);

